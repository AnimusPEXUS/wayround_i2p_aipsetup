#!/bin/bash

if [ ! -d "$AIP_DIR" ]
then
    echo " SORRY: please, install aipsetup (if not yet), and run 'install' from main program (aipsetup)"
    echo " ERROR: AIP_DIR not set"
    exit 1
fi

if [ ! -f "$AIP_DIR/_aipb_extract" ]
then
    echo " ERROR: '$AIP_DIR/_aipb_extract' not found"
    exit 1
fi

# show_help() {
#     echo "fix me"
#     return
# }

# for i in $*
# do
#     if [ "$i" == "--help" ]
#     then
# 	show_help()
# 	exit 0
#     fi
# done
OKi=0
ERi=0

for i in $*
do
    if [ -f "$i" ]
    then
	printf "installing: "$i":"
	bash "$AIP_DIR/_aipb_extract" "$i" /
	if [ $? -eq 0 ]
	then
	    printf ":OK\n"
	    OKi=$(( $OKi + 1 ))
	else
	    printf ":ERROR\n"
	    ERi=$(( $ERi + 1 ))
	fi
    fi
done
echo " installed: $OKi, errors: $ERi, Total: $(( $OKi + $ERi ))"